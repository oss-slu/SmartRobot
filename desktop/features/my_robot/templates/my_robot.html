{% extends "base.html" %}

{% block content %}
<link rel="stylesheet" href="{{ url_for('robot.static', filename='css/my_robot.css') }}">

<div class="robot-layout">
  <!-- Left column -->
  <aside class="col-left">
  <!-- Connection -->
  <section class="card">
    <h3>Connection</h3>
    <label class="label">Robot IP</label>
    <input id="robot-ip" class="input" type="text" placeholder="10.178.43.127" value="10.178.43.127">

    <div class="row mt-8">
      <button id="connect-btn" class="btn btn-primary flex-1">ğŸ”Œ Connect</button>
      <button id="disconnect-btn" class="btn btn-danger flex-1" disabled>ğŸ”Œ Disconnect</button>
    </div>

  </section>

    <!-- Robot Status -->
    <section class="card">
      <div class="card-title">
        <h3>Robot Status</h3>
        <span class="badge badge-green">Connected</span>
      </div>

      <div class="metric">
        <div class="metric-head">
          <div class="metric-label">
            <span class="ic">ğŸ”‹</span>
            <span>Battery</span>
          </div>
          <span id="metric-battery-val">78.3007%</span>
        </div>
        <div class="bar"><div class="fill" style="width:78%"></div></div>
      </div>

      <div class="metric">
        <div class="metric-head">
          <div class="metric-label">
            <span class="ic">ğŸ§ </span>
            <span>CPU Usage</span>
          </div>
          <span id="metric-cpu-val">41.72%</span>
        </div>
        <div class="bar"><div class="fill" style="width:42%"></div></div>
      </div>

      <div class="metric">
        <div class="metric-head">
          <div class="metric-label">
            <span class="ic">ğŸŒ¡ï¸</span>
            <span>Temperature</span>
          </div>
          <span id="metric-temp-val">48.51Â°C</span>
        </div>
        <div class="bar"><div class="fill" style="width:49%"></div></div>
      </div>

      <div class="metric">
        <div class="metric-head">
          <div class="metric-label">
            <span class="ic">ğŸ“¡</span>
            <span>Signal Strength</span>
          </div>
          <span id="metric-signal-val">97.46%</span>
        </div>
        <div class="bar"><div class="fill" style="width:97%"></div></div>
      </div>
    </section>
  </aside>

  <!-- Center column: Movement Controls -->
  <main class="col-center card">
    <h3>Movement Controls</h3>

    <!-- Speed -->
    <div class="speed">
      <div class="speed-head">
        <span>Speed</span>
        <span id="speed-val">40%</span>
      </div>
      <input id="speed" class="range" type="range" min="0" max="100" value="40" />
    </div>

    <!-- Direction pad -->
    <div class="pad">
      <button class="pad-btn" data-cmd="move_up" title="Up">â†‘</button>
      <div class="pad-row">
        <button class="pad-btn" data-cmd="move_left" title="Left">â†</button>
        <button class="pad-btn center" data-cmd="stop" title="Stop">â– </button>
        <button class="pad-btn" data-cmd="move_right" title="Right">â†’</button>
      </div>
      <button class="pad-btn" data-cmd="move_down" title="Down">â†“</button>
    </div>


  <!-- Right column: Activity / Diagnostics -->
  <aside class="col-right">
    <div class="tabs">
      <button class="tab active" data-tab="activity">Activity</button>
      <button class="tab" data-tab="diagnostics">Diagnostics</button>
    </div>

    <section id="panel-activity" class="card tab-panel active">
      <h3>Activity Log</h3>
      <div id="activity-log" class="log">
        <!-- Socket.IO pushes entries here -->
      </div>
    </section>

    <section id="panel-diagnostics" class="card tab-panel">
      <h3>Diagnostics</h3>
      <div class="diag">
        <div class="diag-item">
          <span>Uptime</span><span id="diag-uptime">â€”</span>
        </div>
        <div class="diag-item">
          <span>Topics</span><span id="diag-topics">â€”</span>
        </div>
      </div>
    </section>
  </aside>
</div>

<!-- SocketIO + external script -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.7.2/socket.io.js"></script>
<script src="{{ url_for('robot.static', filename='js/websocket.js') }}"></script>
{% endblock %}

