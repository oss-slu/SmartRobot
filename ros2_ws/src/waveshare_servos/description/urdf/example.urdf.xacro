<?xml version="1.0"?>
<robot xmlns:xacro="http://www.ros.org/wiki/xacro" name="waveshare_servos">

  <!-- Tunables: set to your real geometry -->
  <xacro:property name="wheel_radius" value="0.050"/>      <!-- 5 cm -->
  <xacro:property name="wheel_width"  value="0.020"/>      <!-- 2 cm -->
  <xacro:property name="wheel_sep"    value="0.280"/>      <!-- distance between wheel centers -->
  <xacro:property name="base_x"       value="0.20"/>
  <xacro:property name="base_y"       value="0.16"/>
  <xacro:property name="base_z"       value="0.06"/>       <!-- base height (centered) -->
  <xacro:property name="wheel_z"      value="${wheel_radius}"/>

  <!-- Base -->
  <link name="base_link">
    <visual>
      <origin xyz="0 0 ${wheel_z}"/>
      <geometry>
        <box size="${base_x} ${base_y} ${base_z}"/>
      </geometry>
      <material name="white"><color rgba="1 1 1 1"/></material>
    </visual>
    <inertial>
      <origin xyz="0 0 ${wheel_z}"/>
      <mass value="1.0"/>
      <inertia ixx="0.02" iyy="0.02" izz="0.02" ixy="0" ixz="0" iyz="0"/>
    </inertial>
  </link>

  <!-- LEFT WHEEL -->
  <link name="left_wheel_link">
    <visual>
      <!-- Cylinder axis is along Z by default; rotate to align with Y -->
      <origin xyz="0 ${wheel_sep/2} ${wheel_z}" rpy="1.57079632679 0 0"/>
      <geometry>
        <cylinder radius="${wheel_radius}" length="${wheel_width}"/>
      </geometry>
      <material name="black"><color rgba="0.1 0.1 0.1 1"/></material>
    </visual>
  </link>
  <joint name="left_wheel_joint" type="continuous">
    <!-- ROS REP-103: x forward, y left, z up; wheels rotate about +Y -->
    <parent link="base_link"/>
    <child link="left_wheel_link"/>
    <origin xyz="0 ${wheel_sep/2} ${wheel_z}"/>
    <axis xyz="0 1 0"/>
    <limit velocity="100.0" effort="0.0"/>
  </joint>

  <!-- RIGHT WHEEL -->
  <link name="right_wheel_link">
    <visual>
      <origin xyz="0 -${wheel_sep/2} ${wheel_z}" rpy="1.57079632679 0 0"/>
      <geometry>
        <cylinder radius="${wheel_radius}" length="${wheel_width}"/>
      </geometry>
      <material name="black"><color rgba="0.1 0.1 0.1 1"/></material>
    </visual>
  </link>
  <joint name="right_wheel_joint" type="continuous">
    <parent link="base_link"/>
    <child link="right_wheel_link"/>
    <origin xyz="0 -${wheel_sep/2} ${wheel_z}"/>
    <axis xyz="0 1 0"/>
    <limit velocity="100.0" effort="0.0"/>
  </joint>

  <!-- ros2_control hardware mapping (your plugin + servo IDs) -->
  <xacro:include filename="$(find waveshare_servos)/description/ros2_control/example.ros2_control.xacro"/>
  <xacro:example_ws_ros2_control name="example_ws_ros2_control" 
                                 left_joint_name="left_wheel_joint" left_id="2"
                                 right_joint_name="right_wheel_joint" right_id="1"/>

</robot>
